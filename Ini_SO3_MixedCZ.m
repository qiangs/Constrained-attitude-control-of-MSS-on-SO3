clear all;
close all;
clc;

J1= [60 0 -5;
    0 65 0;
    -5 0 70];
J2= [60 0 -5;
    0 65 0;
    -5 0 70];
J3= [60 0 -5;
    0 65 0;
    -5 0 70];
J0= [60 0 -5;
    0 65 0;
    -5 0 70];

G = [1,0,0;
     0,1,0;
     0,0,1];





R01 = SO3(deg2rad(120), [0;0;1]/norm([0;0;1]));
R02 = SO3(deg2rad(80), [0;1;0]/norm([0;1;0]));
R03 = SO3(deg2rad(100), [0;1;1]/norm([0;1;1]));
[nd,Angd] = Q2NA([0.5624;0.5689;0; 0.6]);
R03 = SO3(Angd,nd);

Omega0d=[0;0;0];
Omega01=[0,0,0];
Omega02=[0,0,0];
Omega03=[0,0,0];



[nd0,Angd0] = Q2NA([0.1092;0;-0.4624;-0.8799]);
Rd0 = SO3(Angd0,nd0);
% Rd0*[0,1,0]'
% [nd0,Angd0] = Q2NA([0.1092;0;-0.4624;0.8799]);
% Rd0 = SO3(Angd0,nd0);
R01 = SO3(2.387, [0.3145,0.9113,0.2658]');
R02 = SO3(1.422, [0.1772,0.9751,-0.1329]');
R03 = SO3(2.007, [0.2997,0.9415,0.1543]');


Omega0d=[0;0;0];
% Omega01=[0.1;0.05;-0.2];
% Omega02=[-0.1;0.3;-0.05];
% Omega03=[0;0.06;0.2];
Omega01=[0,0,0];
Omega02=[0,0,0];
Omega03=[0,0,0];

% Rd = SO3(1.861, [-0.6227,-0.6601,0.0957]');

[nd,Angd] = Q2NA([0.5624;-0.5689;0;-0.6]);
Rd = SO3(Angd,nd);

Rd*[0,1,0]'




%% mixed attitude constraints
X=zeros(4,4); % n*4

X(1,:) = [0.68,0.67,0.28,deg2rad(35)];
X(2,:) = [0,-1,0,deg2rad(30)];
X(3,:) = [0.38,0,0.925,deg2rad(25)];
X(4,:) = [-0.813,0.548,-0.192,deg2rad(50)];

thate_T = deg2rad(10);

G = [1,0,0;
     0,1,0;
     0,0,1];


%%  初始化Usat
R=2;
deltat=0.02;
deltar=0.01;
N=R/deltar;

%% 控制参数初始化
K1=[0.01,0,30,0.1]'; %k1-k4 Rd
% K=[0.01,3,25,0.5]'; %k1-k4
% K=[0.1,10,1,0.1]'; %k1-k4
K=[0.5,5,25,0.5]'; %k1-k4

alpha=0.3;
lambda=0.3;
beta=0.3;

